# 2章 TypeScriptの型システム

## 項目6 エディターを使って型システムを調査、探求する

- 変数の宣言からあるべき型を推論してくれる
  - switch式(PHPではmatch式も)の分岐漏れや重複などをなくすのに有用
- エディタを使った開発体験の向上が、ミスを減らして堅牢なコードを作るのに役立つ
- TypeScriptの良さを引き出すにはIDEなどツールの使い方に習熟することも必要

## 項目7 型を値の集合として考える

- TypeScriptの型は集合論的に作られているらしい([サバイバルTypeScript](https://typescriptbook.jp/reference/values-types-variables/mental-model-of-types#%E9%9B%86%E5%90%88%E8%AB%96%E7%9A%84%E3%81%AA%E3%83%87%E3%82%B6%E3%82%A4%E3%83%B3))
- `interface`どうしの`&`や`|`の意味するところが直感と違って混乱する
- `extends`は部分集合(より多くのプロパティを持ったり、プロパティに代入可能な型がより限定される)を意味する
- 競プロはあまり実務の役に立たないと思っているが、型を集合として扱うことにおいては経験が活きそう
- 代入可能 = (代入しようとしている値が)部分集合である

## 項目8 型空間のシンボルと値空間のシンボルの見分け方を知る

- `type`や`interface`で宣言されるのが型空間のシンボル、`let`や`const`で宣言されるのが値空間のシンボル
- 型空間のシンボルはJSへのコンパイルで消える
- 2つの空間で意味が異なるものがたくさんある 混同していると事故りそう
- TypeScriptでは関数の引数を1つのオブジェクトでまとめて渡すことが多い理由が説明されていて納得

## 項目9 型アノテーションを型アサーションより優先的に使用する

- アサーション`as FooType`のほうは型チェックを無視させるのでTSの恩恵を捨てていることになる
- `as const`はときどき見かける気がするけど…
  - むしろ良いものっぽい 詳しくは項目24
- 一般にアサーションを使う「べき」場面はほとんどないといって良さそう

## 項目10 ラッパーオブジェクト型を使用しない

- TypeScriptの型として書く場合、number, string, booleanなどと書き先頭を大文字にしない
- IDEが警告してくれるのでミスすることはあまりなさそう
- SymbolとBigIntは直接呼んでもOK

## 項目11 余剰プロパティチェックと型チェックを区別する

- 「余剰プロパティチェック」はオブジェクトリテラルが余計なプロパティを持っていないことを確認する
  - これはプログラマの意図したものとは違う「であろう」コードを指摘している
- 開発体験をよくするのに貢献しそうで、積極的に活用したい

## 項目12 可能なら関数全体に型を適用する

- 関数型で引数と戻り値の型をまとめて定義でき、式で関数を定義すれば簡潔に書ける
- Parametersで引数の型を取得できる。戻り値のみ変更するときに便利

## 項目13 type(型エイリアス)とinterfaceの違いを知る

- 基本的にはinterfaceを使い、typeでないとダメなときはtypeを使う
- 今のチームの方針があればそれ従うのがよい
- typeはユニオンができるがinterfaceはできない
- typeの&が直感的でないと前回書いたが、プロパティを追加で持つことになっていて型としては範囲が狭まっているので&が適切にみえてきた

## 項目14 readonlyを使用して変更にまつわるエラーを避ける

- サンプルコード(Jacqueline Kennedy)がアメリカ人が書いたことをうかがわせる
- なんでもイミュータブルにするのが良いとされているがTSではあまり見かけない気がする

## 項目15 型演算とジェネリック型を使って重複を避ける

- 変数や関数に言われていること(繰り返しは避けろ、ただやりすぎはやらないより悪い)が型にもあてはまる

## 項目16 インデックスシグネチャよりも適切な代替手段を使う

- キーがstring型で範囲が広すぎるのがまずい
- パターンに応じてより適切な代替手段(interface, Map, Record, マップ型, キー制約付きのインデックスシグネチャ)を使う

## 項目17 数値型のインデックスシグネチャを避ける

- オブジェクトキーは文字列が原則
- 暗黙の型変換が諸悪の根源のように扱われているが、TypeScriptの思想を考えればそれはそう
